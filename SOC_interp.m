function soc_interped = SOC_interp(V)
% OCV = (charge_ocv*ocv_weight + discharge_ocv*(1-ocv_weight)
data = [0	3.122 
1	3.218 
2	3.286 
3	3.337 
4	3.372 
5	3.389 
6	3.401 
7	3.411 
8	3.422 
9	3.431 
10	3.441 
15	3.495 
20	3.543 
25	3.578 
30	3.602 
35	3.622 
40	3.642 
45	3.666 
50	3.699 
55	3.754 
60	3.804 
65	3.852 
70	3.893 
75	3.934 
80	3.980 
85	4.032 
90	4.075 
91	4.080 
92	4.084 
93	4.089 
94	4.094 
95	4.101 
96	4.109 
97	4.119 
98	4.133 
99	4.150 
100	4.173 ];

soc = data(:,1);
ocv = data(:,2);


% ── 1) 포화 구간 처리 ─────────────────────────────────────────────
soc_interped          = zeros(size(V));   % 초기화
soc_interped(V >= 4.173) = 100;           % 상한
soc_interped(V <= 3.122) =   0;           % 하한

% ── 2) 유효 구간(3.122 < V < 4.173)만 선형 보간 ────────────────
mask = (V > 3.122) & (V < 4.173);
soc_interped(mask) = interp1(ocv, soc, V(mask), 'linear');

end 

